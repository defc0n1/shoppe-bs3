- active_nav_item :catalogue
- @page_title = @product.name + " - " + @product.product_category.name

.row
  .large-7.columns
    %h2= @product.name
    %p.intro= @product.short_description
  .large-5.columns
    - if @product.default_image
      = image_tag @product.default_image.path

- if @product.has_variants?
  .row
    .large-12.columns
      %table.variants
        - for variant in @product.variants
          %tr
            %td
              - if variant.in_stock?
                %p.stock.yes In stock
              - else
                %p.stock.no Out of stock
              %h4= variant.name
              %p.price= number_to_currency variant.price
            %td.buy
              = form_tag buy_product_path(@product.product_category.permalink, @product.permalink, :variant => variant.id), :class => (variant.in_stock? ? 'in-stock' : 'no-stock') do
                %p
                  = select_tag 'quantity', options_for_select([1,2,3,4,5,6,7,8,9]), :disabled => !variant.in_stock?
                  = submit_tag 'Add Product to Basket', class: 'button success', :disabled => !variant.in_stock?
- else
  %p= number_to_currency @product.price
  %hr
  - if @product.in_stock?
    .alert-box.info.radius
      %p Product In Stock! - Order in the next <b>#{time_until_next_delivery_cut_off}</b> for delivery #{next_delivery_day}.
  - else
    .alert-box.warning.radius
      %p This product is currently out of stock. #{link_to "Let me know when you do"}.

  = form_tag buy_product_path(@product.product_category.permalink, @product.permalink), :class => (@product.in_stock? ? 'in-stock' : 'no-stock') do
    .row
      .large-3.columns
        %label{style: 'margin-bottom:5px;'} Quantity
        = select_tag 'quantity', options_for_select([1,2,3,4,5,6,7,8,9]), :disabled => !@product.in_stock?
      .large-4.columns.end
        = submit_tag 'Add Product to Basket', class: 'button success', :disabled => !@product.in_stock?
  

  .links
    %ul
      - if @product.data_sheet
        %li.item.datasheet= link_to "Read product datasheet", @product.data_sheet.path
      - unless @product.in_the_box.blank?
        %hr
        %h3 What's in the box?
        = markdown @product.in_the_box
      %li.item.ask= mail_to Shoppe.settings.email_address, "Ask us a question about this", :subject => "Question about the #{@product.name}"


.row
  .large-12.columns
    %hr
    - unless @attributes.empty?
      %table
        - for attribute in @attributes
          %tr
            %th= attribute.key
            %td= link_to attribute.value, product_filter_path(:key => attribute.key, :value => attribute.value)
    .description
      = markdown @product.description
    
  
